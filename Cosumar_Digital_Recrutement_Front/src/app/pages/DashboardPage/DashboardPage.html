<div class="dashboard-container">
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed()">
    <div class="sidebar-header">
      <button class="sidebar-toggle" (click)="toggleSidebar()">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
      
      <div class="logo" style="margin-top: 20px;">
        @if (!isSidebarCollapsed()) {
          <h2 class="sidebar-text logo-main">COSUMAR DIGITAL</h2>
          <h3 class="sidebar-text logo-sub">RECRUTEMENT</h3>
        } @else {
          <h2 class="logo-collapsed">C</h2>
        }
      </div>
    </div>
    
    <nav class="sidebar-nav">
      <ul class="nav-menu">
        <li class="nav-item" [class.active]="activeMenuItem() === 'dashboard'" [attr.data-tooltip]="'Tableau de bord'">
          <a routerLink="/dashboardpage/dashboard" (click)="setActiveMenuItem('dashboard')">
            <i class="icon dashboard-icon"></i>
            @if (!isSidebarCollapsed()) {
              <span class="sidebar-text">Tableau de bord</span>
            }
          </a>
        </li>
        @if (userRole() !== 'utilisateur' && userRole() !== 'responsable_de_service') {
          <li class="nav-item" [class.active]="activeMenuItem() === 'creation_stage'" [attr.data-tooltip]="'Création de Stage'">
            <a routerLink="/dashboardpage/creationstage" (click)="setActiveMenuItem('creation_stage')">
              <i class="icon creation_stage-icon"></i>
              @if (!isSidebarCollapsed()) {
                <span class="sidebar-text">Création de Stage</span>
              }
            </a>
          </li>
        }
        <li class="nav-item" [class.active]="activeMenuItem() === 'stages'" [attr.data-tooltip]="'Stages'">
          <a routerLink="/dashboardpage/stages" (click)="setActiveMenuItem('stages')">
            <i class="icon stages-icon"></i>
            @if (!isSidebarCollapsed()) {
              <span class="sidebar-text">Stages</span>
            }
          </a>
        </li>
        <li class="nav-item" [class.active]="activeMenuItem() === 'stagiaires'" [attr.data-tooltip]="'Stagiaires'">
          <a routerLink="/dashboardpage/stagiaires" (click)="setActiveMenuItem('stagiaires')">
            <i class="icon stagiaires-icon"></i>
            @if (!isSidebarCollapsed()) {
              <span class="sidebar-text">Candidats</span>
            }
          </a>
        </li>
        @if (userRole() === 'admin') {
          <li class="nav-item" [class.active]="activeMenuItem() === 'utilisateurs'" [attr.data-tooltip]="'Utilisateurs'">
            <a routerLink="/dashboardpage/utilisateurs" (click)="setActiveMenuItem('utilisateurs')">
              <i class="icon utilisateurs-icon"></i>
              @if (!isSidebarCollapsed()) {
                <span class="sidebar-text">Utilisateurs</span>
              }
            </a>
          </li>
        }
      </ul>
    </nav>
  </aside>

  <!-- Main Content Area -->
  <main class="main-content">
    <!-- Top Header -->
    <header class="top-header">
      <div class="header-left">
        <h1 class="page-title">{{ getPageTitle() }}</h1>
      </div>
      
      <div class="header-right">
        
        <div class="user-menu">
          <button class="user-button" (click)="toggleUserMenu()">
            <div class="user-avatar">
              <i class="user-icon"></i>
            </div>
            <span class="user-name">{{ userName() }}</span>
            <i class="dropdown-arrow" [class.rotated]="isUserMenuOpen()"></i>
          </button>
          
          @if (isUserMenuOpen()) {
            <div class="user-dropdown">
              <div class="user-info">
                <div class="user-avatar-large">
                  <i class="user-icon"></i>
                </div>
                <div class="user-details">
                  <strong>{{ userName() }}</strong>
                  <span class="user-role">{{ userRole() }}</span>
                  <span class="user-email">{{ userEmail() }}</span>
                </div>
              </div>
              <hr class="dropdown-divider">
              <ul class="dropdown-menu">
                <li>
                  <button (click)="viewProfile()" class="dropdown-item">
                    <i class="profile-icon"></i>
                    <span>Voir Profil</span>
                  </button>
                </li>
                <li>
                  <hr class="dropdown-divider">
                </li>
                <li>
                  <button (click)="logout()" class="dropdown-item logout-item">
                    <i class="logout-icon"></i>
                    <span>Logout</span>
                  </button>
                </li>
              </ul>
            </div>
          }
        </div>
      </div>
    </header>

    <!-- Dashboard Content -->
    <div class="dashboard-content">
      <div class="content-area">
        <router-outlet></router-outlet>
      </div>
    </div>
  </main> 
</div>